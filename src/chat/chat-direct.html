<template>
    <require from="./chat-direct.css"></require>
    <require from="./md-github.css"></require>
    <require from="dropzone/dist/basic.css"></require>
    <require from="swipebox/src/css/swipebox.min.css"></require>
    <require from="simplemde/dist/simplemde.min.css"></require>
    <require from="highlight/styles/github.css"></require>
    <div ref="chatContainerRef" class="tms-chat-direct">
        <em-chat-top-menu users.bind="users" login-user.bind="loginUser" channels.bind="channels" channel.bind="channel" login-user.bind="loginUser" chat-id.bind="chatId" chat-to.bind="chatTo" is-at.bind="isAt"></em-chat-top-menu>
        <em-chat-sidebar-left users.bind="users" login-user.bind="loginUser" channels.bind="channels" chat-to.bind="chatTo" is-at.bind="isAt"></em-chat-sidebar-left>
        <div ref="contentRef" class="tms-content ${isRightSidebarShow ? 'tms-sidebar-show' : ''}">
            <div ref="contentBodyRef" class="tms-content-body">
                <div ref="commentsRef" class="ui basic segment minimal selection list segment comments">
                    <button if.bind="!last" click.delegate="lastMoreHandler()" class="fluid basic ui button tms-pre-more"><i show.bind="lastMoreP && lastMoreP.readyState != 4" class="spinner loading icon"></i> 加载更多(${lastCnt})</button>
                    <em-chat-content-item chats.bind="chats" login-user.bind="loginUser"></em-chat-content-item>
                    <button if.bind="!first" click.delegate="firstMoreHandler()" class="fluid basic ui button tms-next-more"><i show.bind="nextMoreP && nextMoreP.readyState != 4" class="spinner loading icon"></i> 加载更多(${firstCnt})</button>
                </div>
                <em-chat-input channel.bind="channel" is-at.bind="isAt" chat-to.bind="chatTo" em-chat-input.ref="emChatInputRef"></em-chat-input>
            </div>
            <em-chat-sidebar-right></em-chat-sidebar-right>
        </div>
    </div>
</template>
