<template>
    <div class="ui top fixed menu">
        <div ref="chatToDropdownRef" class="ui dropdown link item ${isActiveSearch ? 'tms-hide' : ''} tms-chat-at">
            <i class="big loading at icon"></i>
            <span class="text"></span>
            <i class="dropdown icon"></i>
            <div class="menu">
                <div class="ui icon search input">
                    <i class="search icon"></i>
                    <input ref="filterChatToUser" type="text" placeholder="过滤私聊对象">
                </div>
                <div class="divider"></div>
                <div class="header">
                    <i class="user icon"></i> 切换私聊对象(Ctrl+k)
                </div>
                <div class="scrolling menu">
                    <a repeat.for="item of users" task.bind="initChatToDropdownHandler($last)" href="#/chat/@${item.username}" class="item" title="${item.username}" data-value="${item.username}">
                        <i class="circular icon user"></i> ${item.name}
                    </a>
                </div>
            </div>
        </div>
        <div class="right menu">
            <div class="item tms-item">
                <button click.delegate="sibebarRightHandler()" title="右侧边栏(Ctrl+.)" class="basic ${isRightSidebarShow ? 'active' : ''} ui icon button">
                    <i class="columns icon"></i>
                </button>
            </div>
            <div class="item">
                <div ref="searchRef" class="ui search">
                    <div class="ui left icon input">
                        <input ref="searchInputRef" keyup.trigger="searchKeyupHandler($event)" focusout.trigger="searchFocusoutHandler()" focusin.trigger="searchFocusinHandler()" class="prompt" type="text" placeholder="搜索...">
                        <i class="${(searchingP && searchingP.readyState != 4) ? 'spinner loading' : 'search'} icon"></i>
                        <i ref="searchRemoveRef" click.delegate="clearSearchHandler()" class="remove link icon"></i>
                    </div>
                </div>
            </div>
            <a class="item tms-login-user">
                <i class="circular user icon"></i> ${loginUser.name}
            </a>
        </div>
    </div>
</template>
